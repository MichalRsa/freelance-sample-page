---
import { getTransLink } from "../utils/langs";

export interface Props {
  blok: {
    text: string;
    link: {
      url?: string;
      anchor?: string;
      cached_url: string;
      story?: {
        name: string;
        slug: string;
      };
    };
    fontSize?: string;
    color?: "white" | "black";
    font?: "lora" | "rubik";
    style: "primary" | "secondary" | "ternary";
  };
  language: string;
}

const { blok, language } = Astro.props;

const isExternal = !!blok.link.url;

const anchor = !!blok.link.anchor ? `#${blok.link.anchor}` : "";
const url = isExternal
  ? blok.link.url
  : getTransLink(language, `/${blok.link.story?.slug}${anchor}`);

const styles = {
  color: {
    white: "text-secondary-100",
    black: "text-text-500",
  },
  font: {
    lora: "font-lora",
    rubik: "font-rubik",
  },
  type: {
    primary: "bg-secondary-500",
    secondary: "bg-ternary-300",
    ternary: "",
  },
};
---

<div
  class:list={[
    "inline-block px-11 py-3 capitalize text-text-500 shadow-main shadow-text-500 hover:bg-secondary-300 max-md:text-md",
    styles.color[blok.color || "white"],
    styles.font[blok.font || "rubik"],
    blok.fontSize,
    styles.type[blok.style],
  ]}
>
  <a href={url}>
    {blok.text}
  </a>
</div>
